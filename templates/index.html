{% extends "base.html" %}
{% block content %}
<div class="hero">
    <div class="hero-content">
        <h1>
            <i class="fas fa-handshake feature-icon"></i>
            Welcome !
          </h1>
        <p>Generate professional cybersecurity reports with ease.</p>
        <form action="{{ url_for('index') }}" method="post" enctype="multipart/form-data" class="upload-form" id="uploadForm">
            <!-- Drag-and-Drop Area -->
            <div class="upload-area" id="uploadArea">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>Drag and drop files here or <span class="browse-link">browse</span></p>
                <input type="file" name="file" id="file" required multiple accept=".csv,.json,.txt,.log,.pdf,.doc,.docx,.html,.xml">
            </div>
            <!-- File Preview -->
            <div class="file-preview" id="filePreview">
                <p>No files selected</p>
            </div>
            <!-- Hidden field to store extracted text -->
            <input type="hidden" id="extractedText" name="extractedText" value="{{ extracted_text }}">
            <!-- Hidden field to store file name -->
            <input type="hidden" id="fileName" name="fileName" value="{{ file_name }}">
            <!-- Buttons -->
            <div class="form-buttons">
                <button type="submit" class="btn-primary" id="generateReportButton">
                    <i class="fas fa-magic"></i> Generate Report
                </button>
                <button type="button" class="btn-secondary" id="clearFilesButton">
                    <i class="fas fa-times"></i> Clear Files
                </button>
            </div>
            <p class="step-description">
                Upload only cybersecurity findings or penetration testing reports.  Maximum file size: 20 MB. Avoid uploading sensitive or personal information 
            </p>
        </form>
    </div>
</div>

<!-- Full-Screen Loading Spinner -->
<div id="fullScreenSpinner" class="full-screen-spinner">
    <div class="spinner-content">
        <i class="fas fa-spinner fa-spin"></i>
        <p>Processing...</p>
    </div>
</div>

<!-- Progress Bar -->
<div class="progress-bar-container" id="progressBarContainer">
    <div class="progress-bar" id="progressBar"></div>
    <span class="progress-text" id="progressText">0%</span>
    <div id="fullScreenSpinner" class="full-screen-spinner">
        <div class="spinner-content">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Generating...</p>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/upload.js') }}"></script>
{% endblock %}